"use strict";angular.module("dcm-ui.grid",[]),angular.module("dcm-ui.grid").controller("DCMGridCtrl",["$scope","$compile","$log","$interpolate","$timeout",function(e,t,n,a,r){var o=this,i=[],l=[];e.storeConfig&&localStorage[e.storeConfig]&&(n.info("GRID: attempting to load grid config from local storage"),l=JSON.parse(localStorage[e.storeConfig])),e.hasOwnProperty("columns")&&angular.isArray(e.columns)&&(i=e.columns);var c=o.columns=e.columns=[];e.hasOwnProperty("editColumns")&&(e.editColumns=c,e.editColumns.update=function(){o.redrawGrid()}),o.rowActionContent="",o.oRowActions=void 0,o.headerRow="",o.aRows=[];var s=0,u={};o.getGridDataID=function(t){return t.hasOwnProperty("$$gridDataID")||(s++,t.$$gridDataID=e.$id+"-"+s.toString()),t.$$gridDataID},o.getGridData=function(e){var t=o.getGridDataID(e);return u.hasOwnProperty(t)?u[t]:null},o.putGridData=function(e,t){u[e]=t},o.addColumn=function(e){var t=_.where(l,{title:e.title,content:e.content});t.length||(t=_.where(i,{title:e.title,content:e.content})),t.length&&(e.sortDefault=t[0].sortDefault,e.width=t[0].width,e.enabled=t[0].enabled),c.push(e)},o.redrawGrid=function(){o.tableBody.empty(),o.tableHead.empty(),o.tableHead.append(o.generateHeaderRow()),o.generateTemplates(),t(o.tableHead)(e);for(var a=0,r=o.aRows.length;r>a;a++){var i=o.aRows[a],l=o.getGridData(i);l.row=o.rowTemplate(l.scope,angular.noop),l.checkbox=l.row.find("td.dcm-grid-selectable i"),o.tableBody.append(l.row)}n.info("GRID: templates regenerated + table updated"),o.storeConfig()},o.getColWidthPct=function(e){return Math.round(e.outerWidth(!0)/o.headerRow.width()*1e4)/100},e.$on("TABLE_COL_RESIZED",function(){var e=0,t=o.headerRow.children();o.bEnableActive&&e++,angular.forEach(o.columns,function(n){if(n.enabled){var a=angular.element(t[e]);n.width=o.getColWidthPct(a).toString()+"%",e++}}),o.storeConfig()}),o.storeConfig=function(){if(e.storeConfig){var t=_.map(c,function(e){return{width:e.width,sortDefault:e.sortDefault,enabled:e.enabled,title:e.title,content:e.content}});localStorage[e.storeConfig]=JSON.stringify(t),n.info("GRID: grid config saved to local storage")}},o.oRowAttributes={},o.addRowAttributes=function(e){angular.extend(o.oRowAttributes,e)},o.oRowActionsAttributes={},o.addRowActionsAttributes=function(e){angular.extend(o.oRowActionsAttributes,e)},o.getSelectedAsArray=function(){if("single"===o.selectType){var t=[];return e.selected&&t.push(e.selected),t}return e.selected},o.selectedPosition=function(e){return _.indexOf(o.getSelectedAsArray(),e.data)},o.toggleSelected=function(t){var n,a,r;if(t)for(a=0,r=e.datasource.length;r>a;a++)n=o.getGridData(e.datasource[a]),n.checkbox.hasClass(o.checkedIcon)||o.addSelected(n);else for(a=e.selected.length-1;a>=0;a--)n=o.getGridData(e.selected[a]),o.removeSelected(n)},o.addSelected=function(t){"single"===o.selectType?(e.selected&&e.selected!==t.data&&o.removeSelected(o.getGridData(e.selected)),e.selected=t.data):e.selected.push(t.data),t.scope.$row.checked=!0,o.bEnableActive&&o.oRowActions&&e.activeRow===t.data&&o.oRowActions.addClass("selected")},o.removeSelected=function(t){"single"===o.selectType?e.selected=null:e.selected.splice(o.selectedPosition(t),1),t.scope.$row.checked=!1,o.bEnableActive&&o.oRowActions&&e.activeRow===t.data&&o.oRowActions.removeClass("selected")},o.mergeAttributes=function(e,t){angular.forEach(t,function(t,n){"ng-class"===n&&e.attr("ng-class")?e.attr(n,(e.attr("ng-class")+t).replace(/}\s*{/,", ")):e.attr(n,t)})},o.rowTemplate=angular.noop,o.activeRowTemplate=angular.noop,o.generateTemplates=function(){var e,n,a=angular.element('<tr ng-class="{selected: $row.checked}">');o.mergeAttributes(a,o.oRowAttributes);for(var r=0,i=o.columns.length;i>r;r++)e=o.columns[r],e.enabled&&(n=angular.element("<td>"),n.append(e.content),o.mergeAttributes(n,e.attributes),a.append(n));if(o.bEnableSelect){var l="{'"+o.checkedIcon+"': $row.checked, '"+o.notCheckedIcon+"': !$row.checked }",c=angular.element('<i class="fa" ng-class="'+l+'"></i>');a.append(angular.element('<td ng-click="toggleChecked($row, $event);" class="dcm-grid-selectable"></td>').append(c))}if(o.bEnableActive?(a.attr("ng-click","toggleActiveRow($row)"),a.prepend(angular.element('<td class="dcm-grid-activemarker"></td>'))):o.bEnableSelect&&a.attr("ng-click","toggleChecked($row, $event)"),o.rowTemplate=t(a),o.bRowActions){var s=angular.element('<tr class="dcm-grid-details">');o.mergeAttributes(s,o.oRowActionsAttributes);var u=o.colCount-1,d=angular.element('<td ng-click="" colspan="'+u+'">').html(o.rowActionContent);o.bEnableActive&&s.append(angular.element('<td class="dcm-grid-activemarker"></td>')),s.append(d),o.activeRowTemplate=t(s)}},o.generateHeaderRow=function(){o.colCount=0;for(var n=-1,r=0;r<o.columns.length;r++)o.columns[r].enabled&&(n=r);var i=angular.element("<tr>");if(angular.forEach(o.columns,function(n){if(n.enabled){n.icon="",o.colCount++;var r,l=e.$new(!1);l.column=n,r=t('<a>{{column.title}}<i class="fa" ng-if="column.icon" ng-class="column.icon"></a>')(l);var c=angular.element('<th class="resizable-column">').append(r);if(c.css("width",n.width?n.width:"auto"),o.sortable){var s;switch(s=n.field?function(e){return e[n.field]}:a(n.content),n.sortType){case"string":n.sortFunction=function(e){var t=s(e)||"";return t.toLowerCase()};break;case"integer":n.sortFunction=function(e){var t=s(e);return t=t?t:0,parseInt(t,10)};break;case"datetime":n.sortFunction=function(e){var t=new Date(s(e));return t.getTime()};break;case"direct":n.sortFunction=s;break;default:var u;n.sortFunction=function(e){var t=s(e);switch(u||(u=typeof t,"string"===u&&t.match(/^\d{4,4}-\d\d-\d\dT\d\d:\d\d:\d\dZ$/)&&(u="datetime")),u){case"string":return t?t.toLowerCase():"";case"datetime":return t?t:"";default:return t?t:""}}}n.sortDefault&&(e.sortFunction=n.sortFunction,o.currentSort&&o.currentSort!==n&&(o.currentSort.sortDefault=!1),o.currentSort=n,e.sortOrder=n.sortDefault.toUpperCase(),"ASC"===e.sortOrder?n.icon="fa-angle-up":n.icon="fa-angle-down"),c.bind("click",function(){e.$apply(function(){o.currentSort?(o.currentSort.icon="",o.currentSort===n&&"DESC"!==e.sortOrder?(e.sortOrder="DESC",n.icon="fa-angle-down"):(e.sortOrder="ASC",n.icon="fa-angle-up")):(e.sortOrder="ASC",n.icon="fa-angle-up"),o.currentSort!==n&&(o.currentSort&&(o.currentSort.sortDefault=!1),e.sortFunction=n.sortFunction,o.currentSort=n),o.currentSort.sortDefault=e.sortOrder,o.storeConfig()})})}i.append(c)}}),o.bEnableSelect){o.colCount++;var l=angular.element('<th class="dcm-grid-selectable"></th>');if("single"!==o.selectType){var c=angular.element('<i class="fa fa-square-o">');c.bind("click",function(){e.$apply(function(){var e=c.hasClass(o.checkedIcon);o.toggleSelected(!e)})}),l.append(c),o.unbindBulkCheck&&o.unbindBulkCheck(),o.unbindBulkCheck=e.$watchCollection("selected",function(e){var t=e.length&&e.length===o.aRows.length;c.removeClass("fa-check-square-o fa-square-o").addClass(t?o.checkedIcon:o.notCheckedIcon)})}i.append(l)}return o.bEnableActive&&(o.colCount++,i.prepend(angular.element('<th class="dcm-grid-activemarker"></th>')),e.$watch("activeRow",function(e,t){o.removeActiveRow(t),o.setActiveRow(e)})),o.headerRow=i,i},o.removeActiveRow=function(t){if(t=t||e.activeRow){var n=o.getGridData(t);n&&n.row&&n.row.removeClass("active"),e.activeRow=void 0}o.oRowActions&&o.oRowActions.remove()};var d=function(e){if(e&&e.hasOwnProperty("row")){if(e.row.addClass("active"),o.bRowActions){var t=o.activeRowTemplate(e.scope,angular.noop);o.bEnableSelect&&-1!==o.selectedPosition(e)&&t.addClass("selected"),o.oRowActions=t,e.row.after(o.oRowActions)}}else o.removeActiveRow()};o.setActiveRow=function(t){if(o.removeActiveRow(),t){e.activeRow=t;var n=o.getGridData(t);n&&n.hasOwnProperty("row")?d(n):r(function(){d(n)},0)}},e.$on("$destroy",function(){if(o.bEnableActive&&e.activeRow&&o.removeActiveRow(),o.bEnableSelect)for(var t=o.getSelectedAsArray(),n=t.length-1;n>=0;n--){var a=o.getGridData(t[n]);o.removeSelected(a)}})}]),angular.module("dcm-ui.grid").directive("dcmGridColumn",[function(){return{require:"^dcmGrid",restrict:"E",scope:{field:"@",title:"@",width:"@",enabled:"@",sortType:"@",sortDefault:"@",resizable:"@"},compile:function(e,t){var n=$.trim(e.html());return function(e,a,r,o){var i={};angular.forEach(r,function(t,n){"$"===n[0]||e.hasOwnProperty(n)||""===r[n]||(i[n.replace(/([A-Z])/g,"-$1").toLowerCase()]=t)});var l={content:n,attributes:i,enabled:r.hasOwnProperty("enabled")?"false"!==e.enabled.toLowerCase():!0,title:e.title,width:e.width,resizable:r.hasOwnProperty("resizable")?"false"!==e.resizable.toLowerCase():!0,field:r.field,sortType:e.sortType||"",sortDefault:r.hasOwnProperty("sortDefault")?r.sortDefault||"ASC":!1};if(!r.field||""===r.field){var c=n.match(/^\s*{{\s*(\S+)\s*}}\s*$/);c&&(l.field=c[1])}void 0===t.title&&l.field&&""!==l.field&&(l.title=l.field[0].toUpperCase()+l.field.slice(1)),o.addColumn(l)}}}}]),angular.module("dcm-ui.grid").directive("dcmGrid",["$animate","$log","$compile","$window",function(e,t,n,a){return{restrict:"E",require:"dcmGrid",scope:{datasource:"=",activeRow:"=?",selected:"=?",additionalRowData:"=?",sortFunction:"=?",sortOrder:"=?",editColumns:"=?",storeConfig:"@"},controller:"DCMGridCtrl",compile:function(){return function(r,o,i,l){l.bEnableSelect=!!i.selected,l.bEnableActive=!!i.activeRow,l.sortable=!!i.sortFunction,l.selectType=i.selectType?i.selectType.toLowerCase():"multiple","multiple"===l.selectType?(l.checkedIcon="fa-check-square-o",l.notCheckedIcon="fa-square-o"):(l.checkedIcon="fa-dot-circle-o",l.notCheckedIcon="fa-circle-o"),r.additionalRowData&&(l.additionalRowData=r.additionalRowData);var c=l.tableHead=angular.element("<thead>"),s=l.tableBody=angular.element("<tbody>"),u=l.table=angular.element('<table class="dcm-grid-table resizable-columns">');i.width&&u.css("width",i.width),u.append(c),c.append(l.generateHeaderRow()),n(u)(r),l.generateTemplates();var d=[],f={};l.bEnableSelect&&"single"===l.selectType&&r.$watch("selected",function(e,t){var n;e!==t&&(t&&(n=l.getGridData(t),n&&l.removeSelected(n)),e&&(n=l.getGridData(e),n?l.addSelected(n):r.selected=null))}),r.$watchCollection("datasource",function(n){var o=(new Date).getTime();l.aRows=n;var i,c=[];if(_.isArray(n)||(n=[]),l.bEnableActive&&r.activeRow&&(-1!==_.indexOf(n,r.activeRow)&&(t.info("GRID: storing active row to reopen later"),i=r.activeRow),l.removeActiveRow()),l.bEnableSelect){c=l.getSelectedAsArray();for(var u=c.length-1;u>=0;u--)if(-1===_.indexOf(n,c[u])){var m=l.getGridData(c[u]);m?l.removeSelected(m):"single"===l.selectType?r.selected=null:r.selected.splice(u,1)}}r.toggleActiveRow=function(e){var t=a.getSelection().toString();t||(r.activeRow===e.data?l.removeActiveRow():l.setActiveRow(e.data))},r.toggleChecked=function(e,t){e.checked=!e.checked,e.checked?l.addSelected(e.record):l.removeSelected(e.record),t.stopPropagation()};for(var h,v,w,b,C=[],D={},y=function(e,t){var n=this;n[t]=e,n.$watch("$$gridData."+t,function(e){e!==n[t]&&(n[t]=e)})},$=0,A=n.length;A>$;$++){var S=n[$];if(h=l.getGridDataID(S),v=l.getGridData(S),!v||!_.isEqual(v.lastValue,S)){var R=r.$new(!1),P=S,O={};R.$$gridData=n[$],angular.forEach(S,y,R),l.additionalRowData&&angular.extend(R,l.additionalRowData),R.$row={checked:-1!==_.indexOf(c,P)?!0:!1,data:P,record:O},angular.extend(O,{scope:R,data:P,lastValue:_.clone(P),id:h}),l.putGridData(h,O),l.bEnableActive&&r.activeRow===P&&l.setActiveRow(P.data),v=O}D[h]=C.length,C.push(v)}for($=d.length-1;$>=0;$--)v=d[$],D.hasOwnProperty(v.id)||(w=f[v.id],delete f[v.id],d.splice(w,1),$-1<d.length-1&&p($,d.length),e.leave(v.row));for($=0,A=C.length;A>$;$++)v=C[$],d.length>=$&&d[$]===v||(f.hasOwnProperty(v.id)?(0===$?e.move(v.row,s,null):e.move(v.row,s,d[$-1].row),b=f[v.id],d.splice(b,1),d.splice($,0,v),f[v.id]=$,g($+1,b+1)):(v.row=l.rowTemplate(v.scope,angular.noop),v.checkbox=v.row.find("td.dcm-grid-selectable i"),0===$?e.enter(v.row,s,null):e.enter(v.row,s,d[$-1].row),d.splice($,0,v),f[v.id]=$,$+1<d.length&&g($+1,d.length)));i&&(t.info("GRID: restoring active row"),l.setActiveRow(i));var x=(new Date).getTime()-o;t.info("GRID: Update after data change "+x+"ms")});var g=function(e,t){_.each(_.range(e,t),function(e){f[d[e].id]++})},p=function(e,t){_.each(_.range(e,t),function(e){f[d[e].id]--})};u.append(s),o.empty().append(u)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRowActions",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(e){return function(t,n,a,r){r.rowActionContent=$.trim(e.html()),r.bRowActions=!0;var o={};angular.forEach(a,function(e,n){"$"===n[0]||t.hasOwnProperty(n)||""===a[n]||(o[n.replace(/([A-Z])/g,"-$1").toLowerCase()]=e)}),r.addRowActionsAttributes(o)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRow",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(){return function(e,t,n,a){var r={};angular.forEach(n,function(t,a){"$"===a[0]||e.hasOwnProperty(a)||""===n[a]||(r[a.replace(/([A-Z])/g,"-$1").toLowerCase()]=t)}),a.addRowAttributes(r)}}}}]),angular.module("dcm-ui.grid").factory("datasource",["$timeout","$q","$log","$http",function(e,t,n,a){var r={create:function(r,o){var i,l,c,s,u,d,f,g,p,m,h,v,w=null,b={type:"get"},C={perPage:5};o.hasOwnProperty("autoLoad")||(o.autoLoad=!0),o.hasOwnProperty("requestDataFunction")||(o.requestDataFunction=function(n){var r=t.defer(),o=function(){a(n).then(function(t){var a=t.data;r.notify(a.hasOwnProperty("data")?a.data:a),a.complete||!a.hasOwnProperty("complete")?r.resolve():a.hasOwnProperty("complete")&&a.token&&(n.hasOwnProperty("params")||(n.params={}),n.params.token=a.token,e(function(){o()},250))},r.reject)};return o(),r.promise});var D=function(){if(h&&O.data.length){O.bFiltering=!0;var e=new Date;"ASC"!==O.sortOrder&&O.data.reverse(),O.data=_.sortBy(O.data,h),"ASC"!==O.sortOrder&&O.data.reverse();var t=new Date-e;n.info("DATASOURCE: Sort "+t+"ms"),O.bPaused?("ASC"!==O.sortOrder&&O.viewData.reverse(),O.viewData=_.sortBy(O.viewData,h),"ASC"!==O.sortOrder&&O.viewData.reverse(),P(),O.bFiltering=!1):R()}};r.$watch(function(){return O.sortFunction},function(e){h=e,D()});var y;r.$watch(function(){return O.sortOrder},function(e){("DESC"===e||y&&y===h)&&(O.data.reverse(),O.viewData.reverse(),P(),O.bFiltering=!1),y=h}),o.hasOwnProperty("pagination")&&(g=angular.extend({},C,o.pagination),u=r.$watchCollection(function(){return o.pagination},function(e){g=angular.extend(g,e),P()})),r.$watchCollection(function(){return o.request},function(e){s&&s(),d=angular.extend({},b,e),d.hasOwnProperty("params")&&(s=r.$watchCollection(function(){return o.request.params},function(e){d.params=e,O.bOptionsValid&&o.autoLoad&&$()})),O.bOptionsValid&&o.autoLoad&&$()}),r.$on("$destroy",function(){f&&f.resolve()});var $=_.debounce(function(){n.info("DATASOURCE: Starting new data load"),e(function(){if(O.bOptionsValid&&O.bFilterValid){if(O.bLoading){if(angular.equals(O.currentRequestOptions,d))return;f.resolve()}v=!0,O.bLoading=!0,O.data=[],O.pageData=[],O.viewData=[],O.pages=0,f=t.defer(),d.timeout=f.promise,O.currentRequestOptions=angular.copy(d);var a=!0,r=0,i=0,l=o.requestDataFunction(d),c=new Date;l.then(function(){O.bLoading=!1,a&&(h?D():(O.bFiltering=!0,R())),t.when(w).then(function(){var t=new Date-c;if(n.info("DATASOURCE: Complete loading time: "+t+"ms"),v=!1,o.hasOwnProperty("onLoadComplete")){var a=new Date;e(function(){o.onLoadComplete();var e=new Date-a;n.info("DATASOURCE: Load complete function: "+e+"ms")},0)}})},function(){n.warn("DATASOURCE: Request cancelled"),O.bLoading=!1,O.bFiltering=!1,v=!1},function(e){var t=new Date;O.data.push.apply(O.data,e);var o=new Date-t;n.info("DATASOURCE: Loading new data: "+o+"ms"),1e3>r?(h?D():(O.bFiltering=!0,R()),a=!1,i=t,r=new Date-t):(a=!0,n.info("DATASOURCE: skipping sort/filter due to previous process time"),r-=new Date-i),i=t})}},0)},100);o.hasOwnProperty("requestValid")&&o.requestValid&&r.$watch(o.requestValid,function(e){O.bOptionsValid=!!e,O.bOptionsValid&&o.autoLoad&&$()});var A=null,S=null,R=function(){return S?e.cancel(A):S=t.defer(),w=S.promise,A=e(function(){var e,t,a=0,r=[];if(O.bPaused){if(i){for(t=O.viewData.length;t>a;a++)e=O.viewData[a],i(e)&&r.push(e);O.viewData=r}}else{var o=new Date;if(i){for(t=O.data.length;t>a;a++)e=O.data[a],i(e)&&r.push(e);O.viewData=r}else O.viewData=O.data.slice(0);P(),O.bFiltering=!1;var l=new Date-o;n.info("DATASOURCE: Filter "+l+"ms")}S.resolve(),S=null},100),w},P=function(){g?(g.perPage=parseInt(g.perPage,10),(!g.perPage||g.perPage<=0)&&(g.perPage=C.perPage),O.pages=Math.ceil(O.viewData.length/g.perPage),O.currentPage=Math.min(O.currentPage,O.pages),O.currentPage<=0&&(O.currentPage=Math.min(1,O.pages)),p=g.perPage*(O.currentPage-1),m=Math.min(p+g.perPage,O.viewData.length),O.pageData=O.viewData.slice(p,m)):(O.pageData=O.viewData,O.viewData.length?(O.pages=1,O.currentPage=1):(O.pages=0,O.currentPage=0))},O={bLoading:!1,bFiltering:!1,bFilterValid:!0,bOptionsValid:!0,bPaused:!1,initialRequestOptions:o.request,currentRequestOptions:{},currentPage:0,data:[],viewData:[],pageData:[],pages:0,sortFunction:null,sortOrder:"ASC",setPage:function(e){O.currentPage=e,P()},loadData:function(){O.bPaused=!1,$()},cancelRequest:function(){f&&f.resolve()},pause:function(){O.bPaused=!0,O.bFiltering=!1},resume:function(){O.bPaused=!1,O.bFiltering=!0,R()}};return o.hasOwnProperty("filter")&&(i=o.filter.filterFunction,o.hasOwnProperty("filterValid")&&(c=r.$watch(o.filterValid,function(e){O.bFilterValid=!!e,!O.bLoading&&O.bFilterValid&&(O.bFiltering=!0,R())})),l=r.$watchCollection(function(){return o.filter.values},function(){O.bFilterValid&&(O.bFiltering=!0,R())})),O}};return r}]),angular.module("dcm-ui.grid").factory("filters",["$interpolate",function(e){var t=function(e,t){return void 0===e?void 0===t?"":t:e},n={"new":function(n){var a={data:{},defaultValues:{},defaultParams:{},values:{},requestParams:{},filterFunctions:[]};return a.resetFilters=function(){angular.extend(a.values,a.defaultValues),angular.extend(a.requestParams,a.defaultParams)},a.addDefaultValue=function(e,n){a.defaultValues[e]=t(n),a.values[e]=a.defaultValues[e]},a.addDefaultParam=function(e,n){a.defaultParams[e]=t(n),a.requestParams[e]=a.defaultParams[e]},a.onChange=function(e,t,r){n.$watch(function(){return a[e][t]},function(e,t){r(e,t)})},a.onCollectionChange=function(e,t,r){n.$watchCollection(function(){return a[e][t]},function(e,t){r(e,t)})},a.addFilterExactMatch=function(e){a.filterFunctions.push(function(t,n){return""!==t[e]&&t[e].toString()!==n[e].toString()?!1:!0})},a.addFilterExactMatchObject=function(e,t){a.filterFunctions.push(function(n,r){return a.data[t]&&!a.data[t][r[e]]?!1:!0})},a.addFilterInteger=function(e,t){var n;switch(t){case"lt":n=function(e,t){return t>e};break;case"gt":n=function(e,t){return e>t};break;case"eq":n=function(e,t){return e===t}}a.filterFunctions.push(function(t,a){return""===t[e]||n(parseInt(a[e],10),parseInt(t[e],10))?!0:!1})},a.addFilterPartialMatch=function(t,n){var r,o;n&&(r=e(n)),a.filterFunctions.push(function(e,a){return""===e[t]||(o=n?r(a):a[t],o&&-1!==o.toLowerCase().indexOf(e[t].toLowerCase()))?!0:!1})},a.addFilterExactPartialMatch=function(t,n){var r,o;n&&(r=e(n)),a.filterFunctions.push(function(e,a){return""!==e[t]&&(o=n?r(a):a[t],0!==o.toLowerCase().indexOf(e[t].toLowerCase()))?!1:!0})},a.addFilterWhenValueIs=function(e,t){t=t.toString(),a.filterFunctions.push(function(n,a){return n[e]&&n[e].toString()===t&&a[e].toString()!==t?!1:!0})},a.setData=function(e,t){a.data[e]=t},a.filterFunction=function(e){for(var t=!0,n=angular.extend({},a.requestParams,a.values),r=0,o=a.filterFunctions.length;o>r;r++){if(!t)return t;t=a.filterFunctions[r](n,e)}return t},a.addStandardTextSearchFilter=function(e,t){a.addDefaultValue(e,""),a.addFilterPartialMatch(e,t)},a.addExactPartialTextSearchFilter=function(e,t){a.addDefaultValue(e,""),a.addFilterExactPartialMatch(e,t)},a}};return n}]);
//# sourceMappingURL=dcm-ui-grid.min.js.map