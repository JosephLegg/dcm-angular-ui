"use strict";angular.module("dcm-ui.grid",[]),angular.module("dcm-ui.grid").controller("DCMGridCtrl",["$scope","$compile","$log","$interpolate","$timeout",function(a,b,c,d,e){var f=this,g=[],h=[];a.storeConfig&&localStorage[a.storeConfig]&&(c.info("GRID: attempting to load grid config from local storage"),h=JSON.parse(localStorage[a.storeConfig])),a.hasOwnProperty("columns")&&angular.isArray(a.columns)&&(g=a.columns);var i=f.columns=a.columns=[];a.hasOwnProperty("editColumns")&&(a.editColumns=i,a.editColumns.update=function(){f.redrawGrid()}),f.rowActionContent="",f.oRowActions=void 0,f.headerRow="",f.aRows=[];var j=0,k={};f.getGridDataID=function(b){return b.hasOwnProperty("$$gridDataID")||(j++,b.$$gridDataID=a.$id+"-"+j.toString()),b.$$gridDataID},f.getGridData=function(a){var b=f.getGridDataID(a);return k.hasOwnProperty(b)?k[b]:null},f.putGridData=function(a,b){k[a]=b},f.addColumn=function(a){var b=_.where(h,{title:a.title,content:a.content});b.length||(b=_.where(g,{title:a.title,content:a.content})),b.length&&(a.sortDefault=b[0].sortDefault,a.width=b[0].width,a.enabled=b[0].enabled),i.push(a)},f.redrawGrid=function(){f.tableBody.empty(),f.tableHead.empty(),f.tableHead.append(f.generateHeaderRow()),f.generateTemplates(),b(f.tableHead)(a);for(var d=0,e=f.aRows.length;e>d;d++){var g=f.aRows[d],h=f.getGridData(g);h.row=f.rowTemplate(h.scope,angular.noop),h.checkbox=h.row.find("td.dcm-grid-selectable i"),f.tableBody.append(h.row)}c.info("GRID: templates regenerated + table updated"),f.storeConfig()},f.getColWidthPct=function(a){return Math.round(a.outerWidth(!0)/f.headerRow.width()*1e4)/100},a.$on("TABLE_COL_RESIZED",function(){var a=0,b=f.headerRow.children();f.bEnableActive&&a++,angular.forEach(f.columns,function(c){if(c.enabled){var d=angular.element(b[a]);c.width=f.getColWidthPct(d).toString()+"%",a++}}),f.storeConfig()}),f.storeConfig=function(){if(a.storeConfig){var b=_.map(i,function(a){return{width:a.width,sortDefault:a.sortDefault,enabled:a.enabled,title:a.title,content:a.content}});localStorage[a.storeConfig]=JSON.stringify(b),c.info("GRID: grid config saved to local storage")}},f.oRowAttributes={},f.addRowAttributes=function(a){angular.extend(f.oRowAttributes,a)},f.oRowActionsAttributes={},f.addRowActionsAttributes=function(a){angular.extend(f.oRowActionsAttributes,a)},f.getSelectedAsArray=function(){if("single"===f.selectType){var b=[];return a.selected&&b.push(a.selected),b}return a.selected},f.selectedPosition=function(a){return _.indexOf(f.getSelectedAsArray(),a.data)},f.toggleSelected=function(b){var c,d,e;if(b)for(d=0,e=a.datasource.length;e>d;d++)c=f.getGridData(a.datasource[d]),c.checkbox.hasClass(f.checkedIcon)||f.addSelected(c);else for(d=a.selected.length-1;d>=0;d--)c=f.getGridData(a.selected[d]),f.removeSelected(c)},f.addSelected=function(b){"single"===f.selectType?(a.selected&&a.selected!==b.data&&f.removeSelected(f.getGridData(a.selected)),a.selected=b.data):a.selected.push(b.data),b.scope.$row.checked=!0,f.bEnableActive&&f.oRowActions&&a.activeRow===b.data&&f.oRowActions.addClass("selected")},f.removeSelected=function(b){"single"===f.selectType?a.selected=null:a.selected.splice(f.selectedPosition(b),1),b.scope.$row.checked=!1,f.bEnableActive&&f.oRowActions&&a.activeRow===b.data&&f.oRowActions.removeClass("selected")},f.mergeAttributes=function(a,b){angular.forEach(b,function(b,c){"ng-class"===c&&a.attr("ng-class")?a.attr(c,(a.attr("ng-class")+b).replace(/}\s*{/,", ")):a.attr(c,b)})},f.rowTemplate=angular.noop,f.activeRowTemplate=angular.noop,f.generateTemplates=function(){var a,c,d=angular.element('<tr ng-class="{selected: $row.checked}">');f.mergeAttributes(d,f.oRowAttributes);for(var e=0,g=f.columns.length;g>e;e++)a=f.columns[e],a.enabled&&(c=angular.element("<td>"),c.append(a.content),f.mergeAttributes(c,a.attributes),d.append(c));if(f.bEnableSelect){var h="{'"+f.checkedIcon+"': $row.checked, '"+f.notCheckedIcon+"': !$row.checked }",i=angular.element('<i class="fa" ng-class="'+h+'"></i>');d.append(angular.element('<td ng-click="toggleChecked($row, $event);" class="dcm-grid-selectable"></td>').append(i))}if(f.bEnableActive?(d.attr("ng-click","toggleActiveRow($row)"),d.prepend(angular.element('<td class="dcm-grid-activemarker"></td>'))):f.bEnableSelect&&d.attr("ng-click","toggleChecked($row, $event)"),f.rowTemplate=b(d),f.bRowActions){var j=angular.element('<tr class="dcm-grid-details">');f.mergeAttributes(j,f.oRowActionsAttributes);var k=f.colCount-1,l=angular.element('<td ng-click="" colspan="'+k+'">').html(f.rowActionContent);f.bEnableActive&&j.append(angular.element('<td class="dcm-grid-activemarker"></td>')),j.append(l),f.activeRowTemplate=b(j)}},f.generateHeaderRow=function(){f.colCount=0;for(var c=-1,e=0;e<f.columns.length;e++)f.columns[e].enabled&&(c=e);var g=angular.element("<tr>");if(angular.forEach(f.columns,function(c){if(c.enabled){c.icon="",f.colCount++;var e,h=a.$new(!1);h.column=c,e=b('<a>{{column.title}}<i class="fa" ng-if="column.icon" ng-class="column.icon"></a>')(h);var i=angular.element('<th class="resizable-column">').append(e);if(i.css("width",c.width?c.width:"auto"),f.sortable){var j;switch(j=c.field?function(a){return a[c.field]}:d(c.content),c.sortType){case"string":c.sortFunction=function(a){var b=j(a)||"";return b.toLowerCase()};break;case"integer":c.sortFunction=function(a){var b=j(a);return b=b?b:0,parseInt(b,10)};break;case"datetime":c.sortFunction=function(a){var b=new Date(j(a));return b.getTime()};break;case"direct":c.sortFunction=j;break;default:var k;c.sortFunction=function(a){var b=j(a);switch(k||(k=typeof b,"string"===k&&b.match(/^\d{4,4}-\d\d-\d\dT\d\d:\d\d:\d\dZ$/)&&(k="datetime")),k){case"string":return b?b.toLowerCase():"";case"datetime":return b?b:"";default:return b?b:""}}}c.sortDefault&&(a.sortFunction=c.sortFunction,f.currentSort&&f.currentSort!==c&&(f.currentSort.sortDefault=!1),f.currentSort=c,a.sortOrder=c.sortDefault.toUpperCase(),c.icon="ASC"===a.sortOrder?"fa-angle-up":"fa-angle-down"),i.bind("click",function(){a.$apply(function(){f.currentSort?(f.currentSort.icon="",f.currentSort===c&&"DESC"!==a.sortOrder?(a.sortOrder="DESC",c.icon="fa-angle-down"):(a.sortOrder="ASC",c.icon="fa-angle-up")):(a.sortOrder="ASC",c.icon="fa-angle-up"),f.currentSort!==c&&(f.currentSort&&(f.currentSort.sortDefault=!1),a.sortFunction=c.sortFunction,f.currentSort=c),f.currentSort.sortDefault=a.sortOrder,f.storeConfig()})})}g.append(i)}}),f.bEnableSelect){f.colCount++;var h=angular.element('<th class="dcm-grid-selectable"></th>');if("single"!==f.selectType){var i=angular.element('<i class="fa fa-square-o">');i.bind("click",function(){a.$apply(function(){var a=i.hasClass(f.checkedIcon);f.toggleSelected(!a)})}),h.append(i),f.unbindBulkCheck&&f.unbindBulkCheck(),f.unbindBulkCheck=a.$watchCollection("selected",function(a){var b=a.length&&a.length===f.aRows.length;i.removeClass("fa-check-square-o fa-square-o").addClass(b?f.checkedIcon:f.notCheckedIcon)})}g.append(h)}return f.bEnableActive&&(f.colCount++,g.prepend(angular.element('<th class="dcm-grid-activemarker"></th>')),a.$watch("activeRow",function(a,b){f.removeActiveRow(b),f.setActiveRow(a)})),f.headerRow=g,g},f.removeActiveRow=function(b){if(b=b||a.activeRow){var c=f.getGridData(b);c&&c.row&&c.row.removeClass("active"),a.activeRow=void 0}f.oRowActions&&f.oRowActions.remove()};var l=function(a){if(a&&a.hasOwnProperty("row")){if(a.row.addClass("active"),f.bRowActions){var b=f.activeRowTemplate(a.scope,angular.noop);f.bEnableSelect&&-1!==f.selectedPosition(a)&&b.addClass("selected"),f.oRowActions=b,a.row.after(f.oRowActions)}}else f.removeActiveRow()};f.setActiveRow=function(b){if(f.removeActiveRow(),b){a.activeRow=b;var c=f.getGridData(b);c&&c.hasOwnProperty("row")?l(c):e(function(){l(c)},0)}},a.$on("$destroy",function(){if(f.bEnableActive&&a.activeRow&&f.removeActiveRow(),f.bEnableSelect)for(var b=f.getSelectedAsArray(),c=b.length-1;c>=0;c--){var d=f.getGridData(b[c]);f.removeSelected(d)}})}]),angular.module("dcm-ui.grid").directive("dcmGridColumn",[function(){return{require:"^dcmGrid",restrict:"E",scope:{field:"@",title:"@",width:"@",enabled:"@",sortType:"@",sortDefault:"@",resizable:"@"},compile:function(a,b){var c=$.trim(a.html());return function(a,d,e,f){var g={};angular.forEach(e,function(b,c){"$"===c[0]||a.hasOwnProperty(c)||""===e[c]||(g[c.replace(/([A-Z])/g,"-$1").toLowerCase()]=b)});var h={content:c,attributes:g,enabled:e.hasOwnProperty("enabled")?"false"!==a.enabled.toLowerCase():!0,title:a.title,width:a.width,resizable:e.hasOwnProperty("resizable")?"false"!==a.resizable.toLowerCase():!0,field:e.field,sortType:a.sortType||"",sortDefault:e.hasOwnProperty("sortDefault")?e.sortDefault||"ASC":!1};if(!e.field||""===e.field){var i=c.match(/^\s*{{\s*(\S+)\s*}}\s*$/);i&&(h.field=i[1])}void 0===b.title&&h.field&&""!==h.field&&(h.title=h.field[0].toUpperCase()+h.field.slice(1)),f.addColumn(h)}}}}]),angular.module("dcm-ui.grid").directive("dcmGrid",["$animate","$log","$compile","$window",function(a,b,c,d){return{restrict:"E",require:"dcmGrid",scope:{datasource:"=",activeRow:"=?",selected:"=?",additionalRowData:"=?",sortFunction:"=?",sortOrder:"=?",editColumns:"=?",storeConfig:"@"},controller:"DCMGridCtrl",compile:function(){return function(e,f,g,h){h.bEnableSelect=!!g.selected,h.bEnableActive=!!g.activeRow,h.sortable=!!g.sortFunction,h.selectType=g.selectType?g.selectType.toLowerCase():"multiple","multiple"===h.selectType?(h.checkedIcon="fa-check-square-o",h.notCheckedIcon="fa-square-o"):(h.checkedIcon="fa-dot-circle-o",h.notCheckedIcon="fa-circle-o"),e.additionalRowData&&(h.additionalRowData=e.additionalRowData);var i=h.tableHead=angular.element("<thead>"),j=h.tableBody=angular.element("<tbody>"),k=h.table=angular.element('<table class="dcm-grid-table resizable-columns">');g.width&&k.css("width",g.width),k.append(i),i.append(h.generateHeaderRow()),c(k)(e),h.generateTemplates();var l=[],m={};h.bEnableSelect&&"single"===h.selectType&&e.$watch("selected",function(a,b){var c;a!==b&&(b&&(c=h.getGridData(b),c&&h.removeSelected(c)),a&&(c=h.getGridData(a),c?h.addSelected(c):e.selected=null))}),e.$watchCollection("datasource",function(c){var f=(new Date).getTime();h.aRows=c;var g,i=[];if(_.isArray(c)||(c=[]),h.bEnableActive&&e.activeRow&&(-1!==_.indexOf(c,e.activeRow)&&(b.info("GRID: storing active row to reopen later"),g=e.activeRow),h.removeActiveRow()),h.bEnableSelect){i=h.getSelectedAsArray();for(var k=i.length-1;k>=0;k--)if(-1===_.indexOf(c,i[k])){var p=h.getGridData(i[k]);p?h.removeSelected(p):"single"===h.selectType?e.selected=null:e.selected.splice(k,1)}}e.toggleActiveRow=function(a){var b=d.getSelection().toString();b||(e.activeRow===a.data?h.removeActiveRow():h.setActiveRow(a.data))},e.toggleChecked=function(a,b){a.checked=!a.checked,a.checked?h.addSelected(a.record):h.removeSelected(a.record),b.stopPropagation()};var q,r,s,t,u,v,w,x=[],y={};for(q=0,r=c.length;r>q;q++){if(s=c[q],t=h.getGridDataID(s),u=h.getGridData(s),!u||!_.isEqual(u.lastValue,s)){var z=e.$new(!1),A=s,B={};angular.extend(z,s),h.additionalRowData&&angular.extend(z,h.additionalRowData),z.$row={checked:-1!==_.indexOf(i,A)?!0:!1,data:A,record:B},angular.extend(B,{scope:z,data:A,lastValue:_.clone(A),id:t}),h.putGridData(t,B),h.bEnableActive&&e.activeRow===A&&h.setActiveRow(A.data),u=B}y[t]=x.length,x.push(u)}for(q=l.length-1;q>=0;q--)u=l[q],y.hasOwnProperty(u.id)||(v=m[u.id],delete m[u.id],l.splice(v,1),q-1<l.length-1&&o(q,l.length),a.leave(u.row));for(q=0,r=x.length;r>q;q++)u=x[q],l.length>=q&&l[q]===u||(m.hasOwnProperty(u.id)?(0===q?(a.move(u.row,j,l[0].row),a.move(l[0].row,j,u.row)):a.move(u.row,j,l[q-1].row),w=m[u.id],l.splice(w,1),l.splice(q,0,u),m[u.id]=q,n(q+1,w+1)):(u.row=h.rowTemplate(u.scope,angular.noop),u.checkbox=u.row.find("td.dcm-grid-selectable i"),0===q?l.length?(a.enter(u.row,j,l[0].row),a.move(l[0].row,j,u.row)):a.enter(u.row,j,null):a.enter(u.row,j,l[q-1].row),l.splice(q,0,u),m[u.id]=q,q+1<l.length&&n(q+1,l.length)));g&&(b.info("GRID: restoring active row"),h.setActiveRow(g));var C=(new Date).getTime()-f;b.info("GRID: Update after data change "+C+"ms")});var n=function(a,b){_.each(_.range(a,b),function(a){m[l[a].id]++})},o=function(a,b){_.each(_.range(a,b),function(a){m[l[a].id]--})};k.append(j),f.empty().append(k)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRowActions",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(a){return function(b,c,d,e){e.rowActionContent=$.trim(a.html()),e.bRowActions=!0;var f={};angular.forEach(d,function(a,c){"$"===c[0]||b.hasOwnProperty(c)||""===d[c]||(f[c.replace(/([A-Z])/g,"-$1").toLowerCase()]=a)}),e.addRowActionsAttributes(f)}}}}]),angular.module("dcm-ui.grid").directive("dcmGridRow",[function(){return{require:"^dcmGrid",restrict:"E",scope:!1,compile:function(){return function(a,b,c,d){var e={};angular.forEach(c,function(b,d){"$"===d[0]||a.hasOwnProperty(d)||""===c[d]||(e[d.replace(/([A-Z])/g,"-$1").toLowerCase()]=b)}),d.addRowAttributes(e)}}}}]),angular.module("dcm-ui.grid").factory("datasource",["$timeout","$q","$log","$http",function(a,b,c,d){var e={create:function(e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s=null,t={type:"get"},u={perPage:5};f.hasOwnProperty("autoLoad")||(f.autoLoad=!0),f.hasOwnProperty("requestDataFunction")||(f.requestDataFunction=function(c){var e=b.defer(),f=function(){d(c).then(function(b){var d=b.data;e.notify(d.hasOwnProperty("data")?d.data:d),d.complete||!d.hasOwnProperty("complete")?e.resolve():d.hasOwnProperty("complete")&&d.token&&(c.hasOwnProperty("params")||(c.params={}),c.params.token=d.token,a(function(){f()},250))},e.reject)};return f(),e.promise});var v=function(){if(q&&C.data.length){C.bFiltering=!0;var a=new Date;"ASC"!==C.sortOrder&&C.data.reverse(),C.data=_.sortBy(C.data,q),"ASC"!==C.sortOrder&&C.data.reverse();var b=new Date-a;c.info("DATASOURCE: Sort "+b+"ms"),C.bPaused?("ASC"!==C.sortOrder&&C.viewData.reverse(),C.viewData=_.sortBy(C.viewData,q),"ASC"!==C.sortOrder&&C.viewData.reverse(),B(),C.bFiltering=!1):A()}};e.$watch(function(){return C.sortFunction},function(a){q=a,v()});var w;e.$watch(function(){return C.sortOrder},function(a){("DESC"===a||w&&w===q)&&(C.data.reverse(),C.viewData.reverse(),B(),C.bFiltering=!1),w=q}),f.hasOwnProperty("pagination")&&(n=angular.extend({},u,f.pagination),k=e.$watchCollection(function(){return f.pagination},function(a){n=angular.extend(n,a),B()})),e.$watchCollection(function(){return f.request},function(a){j&&j(),l=angular.extend({},t,a),l.hasOwnProperty("params")&&(j=e.$watchCollection(function(){return f.request.params},function(a){l.params=a,C.bOptionsValid&&f.autoLoad&&x()})),C.bOptionsValid&&f.autoLoad&&x()}),e.$on("$destroy",function(){m&&m.resolve()});var x=_.debounce(function(){c.info("DATASOURCE: Starting new data load"),a(function(){if(C.bOptionsValid&&C.bFilterValid){if(C.bLoading){if(angular.equals(C.currentRequestOptions,l))return;m.resolve()}r=!0,C.bLoading=!0,C.data=[],C.pageData=[],C.viewData=[],C.pages=0,m=b.defer(),l.timeout=m.promise,C.currentRequestOptions=angular.copy(l);var d=!0,e=0,g=0,h=f.requestDataFunction(l),i=new Date;h.then(function(){C.bLoading=!1,d&&(q?v():(C.bFiltering=!0,A())),b.when(s).then(function(){var b=new Date-i;if(c.info("DATASOURCE: Complete loading time: "+b+"ms"),r=!1,f.hasOwnProperty("onLoadComplete")){var d=new Date;a(function(){f.onLoadComplete();var a=new Date-d;c.info("DATASOURCE: Load complete function: "+a+"ms")},0)}})},function(){c.warn("DATASOURCE: Request cancelled"),C.bLoading=!1,C.bFiltering=!1,r=!1},function(a){var b=new Date;C.data.push.apply(C.data,a);var f=new Date-b;c.info("DATASOURCE: Loading new data: "+f+"ms"),1e3>e?(q?v():(C.bFiltering=!0,A()),d=!1,g=b,e=new Date-b):(d=!0,c.info("DATASOURCE: skipping sort/filter due to previous process time"),e-=new Date-g),g=b})}},0)},100);f.hasOwnProperty("requestValid")&&f.requestValid&&e.$watch(f.requestValid,function(a){C.bOptionsValid=!!a,C.bOptionsValid&&f.autoLoad&&x()});var y=null,z=null,A=function(){return z?a.cancel(y):z=b.defer(),s=z.promise,y=a(function(){var a,b,d=0,e=[];if(C.bPaused){if(g){for(b=C.viewData.length;b>d;d++)a=C.viewData[d],g(a)&&e.push(a);C.viewData=e}}else{var f=new Date;if(g){for(b=C.data.length;b>d;d++)a=C.data[d],g(a)&&e.push(a);C.viewData=e}else C.viewData=C.data.slice(0);B(),C.bFiltering=!1;var h=new Date-f;c.info("DATASOURCE: Filter "+h+"ms")}z.resolve(),z=null},100),s},B=function(){n?(n.perPage=parseInt(n.perPage,10),(!n.perPage||n.perPage<=0)&&(n.perPage=u.perPage),C.pages=Math.ceil(C.viewData.length/n.perPage),C.currentPage=Math.min(C.currentPage,C.pages),C.currentPage<=0&&(C.currentPage=Math.min(1,C.pages)),o=n.perPage*(C.currentPage-1),p=Math.min(o+n.perPage,C.viewData.length),C.pageData=C.viewData.slice(o,p)):(C.pageData=C.viewData,C.viewData.length?(C.pages=1,C.currentPage=1):(C.pages=0,C.currentPage=0))},C={bLoading:!1,bFiltering:!1,bFilterValid:!0,bOptionsValid:!0,bPaused:!1,initialRequestOptions:f.request,currentRequestOptions:{},currentPage:0,data:[],viewData:[],pageData:[],pages:0,sortFunction:null,sortOrder:"ASC",setPage:function(a){C.currentPage=a,B()},loadData:function(){C.bPaused=!1,x()},cancelRequest:function(){m&&m.resolve()},pause:function(){C.bPaused=!0,C.bFiltering=!1},resume:function(){C.bPaused=!1,C.bFiltering=!0,A()}};return f.hasOwnProperty("filter")&&(g=f.filter.filterFunction,f.hasOwnProperty("filterValid")&&(i=e.$watch(f.filterValid,function(a){C.bFilterValid=!!a,!C.bLoading&&C.bFilterValid&&(C.bFiltering=!0,A())})),h=e.$watchCollection(function(){return f.filter.values},function(){C.bFilterValid&&(C.bFiltering=!0,A())})),C}};return e}]),angular.module("dcm-ui.grid").factory("filters",["$interpolate",function(a){var b=function(a,b){return void 0===a?void 0===b?"":b:a},c={"new":function(c){var d={data:{},defaultValues:{},defaultParams:{},values:{},requestParams:{},filterFunctions:[]};return d.resetFilters=function(){angular.extend(d.values,d.defaultValues),angular.extend(d.requestParams,d.defaultParams)},d.addDefaultValue=function(a,c){d.defaultValues[a]=b(c),d.values[a]=d.defaultValues[a]},d.addDefaultParam=function(a,c){d.defaultParams[a]=b(c),d.requestParams[a]=d.defaultParams[a]},d.onChange=function(a,b,e){c.$watch(function(){return d[a][b]},function(a,b){e(a,b)})},d.onCollectionChange=function(a,b,e){c.$watchCollection(function(){return d[a][b]},function(a,b){e(a,b)})},d.addFilterExactMatch=function(a){d.filterFunctions.push(function(b,c){return""!==b[a]&&b[a].toString()!==c[a].toString()?!1:!0})},d.addFilterExactMatchObject=function(a,b){d.filterFunctions.push(function(c,e){return d.data[b]&&!d.data[b][e[a]]?!1:!0})},d.addFilterInteger=function(a,b){var c;switch(b){case"lt":c=function(a,b){return b>a};break;case"gt":c=function(a,b){return a>b};break;case"eq":c=function(a,b){return a===b}}d.filterFunctions.push(function(b,d){return""===b[a]||c(parseInt(d[a],10),parseInt(b[a],10))?!0:!1})},d.addFilterPartialMatch=function(b,c){var e,f;c&&(e=a(c)),d.filterFunctions.push(function(a,d){return""===a[b]||(f=c?e(d):d[b],f&&-1!==f.toLowerCase().indexOf(a[b].toLowerCase()))?!0:!1})},d.addFilterExactPartialMatch=function(b,c){var e,f;c&&(e=a(c)),d.filterFunctions.push(function(a,d){return""!==a[b]&&(f=c?e(d):d[b],0!==f.toLowerCase().indexOf(a[b].toLowerCase()))?!1:!0})},d.addFilterWhenValueIs=function(a,b){b=b.toString(),d.filterFunctions.push(function(c,d){return c[a]&&c[a].toString()===b&&d[a].toString()!==b?!1:!0})},d.setData=function(a,b){d.data[a]=b},d.filterFunction=function(a){for(var b=!0,c=angular.extend({},d.requestParams,d.values),e=0,f=d.filterFunctions.length;f>e;e++){if(!b)return b;b=d.filterFunctions[e](c,a)}return b},d.addStandardTextSearchFilter=function(a,b){d.addDefaultValue(a,""),d.addFilterPartialMatch(a,b)},d.addExactPartialTextSearchFilter=function(a,b){d.addDefaultValue(a,""),d.addFilterExactPartialMatch(a,b)},d}};return c}]);
//# sourceMappingURL=dcm-ui-grid.min.js.map