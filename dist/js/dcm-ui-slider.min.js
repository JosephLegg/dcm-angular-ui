"use strict";angular.module("dcm-ui.slider",["dcm-ui.helpers.drag"]),angular.module("dcm-ui.slider").directive("dcmSlider",["$document","dragHelper","$window","$timeout",function(a,b,c,d){return{restrict:"E",replace:!1,controller:function(){},scope:{datasource:"=",selected:"="},compile:function(){var a=angular.element('<div class="dcm-slider">'),e=angular.element('<a class="dcm-slider-select-areas"></a>');a.append(e);var f=angular.element('<div class="dcm-slider-bar-container">'),g=angular.element('<div class="dcm-slider-bar">');f.append(g),a.append(f);var h=angular.element('<a class="dcm-slider-drag-handle"></a>');return a.append(h),function(i,j,k,l){j.empty(),j.append(a),l.handleContent&&l.handleContent(function(a){h.append(a)});var m=[],n=[],o=-1,p=function(a){i.selected=a,o=i.datasource.indexOf(a),g.css({width:100*(o/(i.datasource.length-1))+"%"}),h.offset({left:g.offset().left+g.width()-h.width()/2})},q=function(){n=[],h.offset({top:f.offset().top+f.height()/2-h.height()/2}),angular.forEach(m,function(a){var b=a.offset().left;n.push({left:b,right:a.width()+b-1})}),p(i.selected&&-1!==i.datasource.indexOf(i.selected)?i.selected:i.datasource[Math.floor(i.datasource.length/2)])},r=0;b.draggable(h,{dragCursor:"col-resize",mouseDown:function(){r=h.offset(),h.addClass("resizing")},mouseMove:function(a){for(var b=r.left+h.width()/2+a.dX,c=0;c<n.length;c++)c!==o&&(b>=n[c].left&&b<=n[c].right?p(i.datasource[c]):0===c&&b<n[c].left?p(i.datasource[c]):c===n.length-1&&b>n[c].right&&p(i.datasource[c]))},mouseUp:function(){h.removeClass("resizing")}}),i.$watchCollection("datasource",function(b){if(e.empty(),m=[],b&&b.length>1){var c,f=Math.floor(1e6/(b.length-1))/1e4,g=a.outerHeight(!1);angular.forEach(b,function(a,d){var h=angular.element('<a class="dcm-slider-select-area">');c=0===d||d===b.length-1?(f/2).toString()+"%":f.toString()+"%",h.css({"float":"left",width:c,height:g+"px"}),h.on("click",function(b){i.$apply(function(){p(a,h)}),b.stopPropagation(),b.preventDefault()}),e.append(h),m.push(h);var j=angular.element('<div class="dcm-slider-mark">');0===d?j.addClass("first"):d===b.length-1&&j.addClass("last"),h.append(j)}),d(function(){q()},0)}else i.selected=b&&1===b.length?b[0]:void 0}),i.$watchCollection("selected",function(a,b){a!==b&&p(a||-1!==i.datasource.indexOf(a)?a:i.datasource[Math.floor(i.datasource.length/2)])});var s=function(){i.$apply(function(){q()})};angular.element(c).bind("resize",s),i.$on("$destroy",function(){angular.element(c).unbind("resize",s)})}}}}]),angular.module("dcm-ui.slider").directive("dcmSliderHandle",[function(){return{restrict:"E",require:"^dcmSlider",priority:100,scope:!1,transclude:!0,compile:function(){return function(a,b,c,d,e){d.handleContent=e}}}}]);
//# sourceMappingURL=dcm-ui-slider.min.js.map